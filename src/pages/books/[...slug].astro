---
import { type CollectionEntry, getCollection, render } from "astro:content";
import BaseLayout from "@layouts/BaseLayout.astro";
import Article from "@components/Article.astro";
import FormattedDate from "@components/FormattedDate.astro";

export async function getStaticPaths() {
    const books = await getCollection("books");
    return books.map((book) => ({
        params: { slug: book.id },
        props: book,
    }));
}
type Props = CollectionEntry<"books">;

const book = Astro.props;
const { Content } = await render(book);
---

<BaseLayout pageTitle={book.data.title}>
    <div class="p-5 flex flex-col items-center w-full gap-3">
        <h1 class="text-center text-5xl italic font-crimson">
            {book.data.title}
        </h1>
        <div class="flex flex-row items-center gap-2">
            <span class="font-crimson text-lg text-ink-secondary">
                by <span class="italic">{book.data.author}</span>
            </span>
            <span class="text-ink-tertiary">&middot;</span>
            <FormattedDate
                date={book.data.pubDate}
                posted={true}
                class="text-ink-secondary"
            />
        </div>
    </div>
    <Article>
        <Content />
    </Article>
</BaseLayout>
