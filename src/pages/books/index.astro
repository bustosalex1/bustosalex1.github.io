---
/**
 * Page displaying my thoughts on some books.
 */
import BaseLayout from "@layouts/BaseLayout.astro";
import FormattedDate from "@components/FormattedDate.astro";
import { getCollection } from "astro:content";

const allBooks = await getCollection("books");

const sortedBooks = allBooks.sort((a, b) => {
    return b.data.pubDate.getTime() - a.data.pubDate.getTime();
});
---

<BaseLayout pageTitle="Books">
    <!--list of book entries-->
    <div class="flex flex-col divide-y divide-line">
        {
            sortedBooks.map((book, i) => (
                <a
                    href={"/books/" + book.id}
                    class="group flex flex-row items-stretch hover:bg-primary/10 transition-all duration-150"
                >
                    <div class="font-mono text-xs text-ink-tertiary content-center px-4 border-r border-line shrink-0 group-hover:text-primary transition-all duration-150">
                        {String(i + 1).padStart(2, "0")}
                    </div>

                    <div class="flex flex-col sm:flex-row grow items-start sm:items-center justify-between gap-1 p-4">
                        <div class="flex flex-col gap-0.5">
                            <span class="font-mono text-sm text-ink group-hover:text-primary transition-all duration-150 font-bold">
                                {book.data.title}
                            </span>
                            <span class="font-crimson text-ink-secondary">
                                by{" "}
                                <span class="italic">{book.data.author}</span>
                            </span>
                        </div>
                        <FormattedDate date={book.data.pubDate} />
                    </div>
                </a>
            ))
        }
    </div>
</BaseLayout>
