---
/**
 * A toggle that makes use of the `theme-change` package to switch between `light` and `dark` modes.
 */
import { modes } from "@styles/modes";
---

<label class="swap">
    <!-- this hidden checkbox controls the state; checked when dark mode is enabled. -->
    <input
        type="checkbox"
        data-toggle-theme={`${modes.dark},${modes.light}`}
        data-active-class="ACTIVECLASS"
        id="theme-toggle"
    />

    <!-- sun icon (shows when dark mode is enabled) -->
    <span class="icon-[line-md--sunny-outline-loop] w-5 h-5 swap-on"></span>

    <!-- moon icon (shows when light mode is enabled) -->
    <span class="icon-[line-md--moon-alt-loop] w-5 h-5 swap-off"></span>
</label>

<script>
    import { modes } from "@styles/modes";

    document.addEventListener("DOMContentLoaded", () => {
        const checkbox = document.getElementById(
            "theme-toggle",
        ) as HTMLInputElement;
        checkbox.checked = localStorage.getItem("theme") === modes.dark;

        // add listener to save theme to Local Storage when theme toggle is clicked.
        checkbox.addEventListener("click", () => {
            const theme = localStorage.getItem("theme");
            localStorage.setItem(
                "theme",
                theme === modes.dark ? modes.dark : modes.light,
            );
        });
    });
</script>
