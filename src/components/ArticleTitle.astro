---
import Tag from "./Tag.astro";
import FormattedDate from "./FormattedDate.astro";
import Image from "astro/components/Image.astro";
import type { CollectionEntry } from "astro:content";
interface Props {
    data: CollectionEntry<"posts">["data"];
}

const { data }: Props = Astro.props;
---

{
    data.useImage ? (
        <div class="relative w-full overflow-hidden">
            <Image
                src={data.image}
                alt={data.imageAlt}
                class="object-cover w-full h-full"
            />
            <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent" />
            <div class="absolute bottom-0 p-5 text-white flex flex-col items-center w-full gap-3">
                <h1 class="text-2xl md:text-5xl text-center font-crimson italic text-shadow-hero">
                    {data.title}
                </h1>
                <p class="text-sm font-mono text-white/80 text-shadow-soft">
                    {data.description}
                </p>
                <div class="flex flex-row items-center w-full justify-center">
                    {data.tags && (
                        <div class="flex gap-2 flex-row flex-nowrap items-center border-line border-dashed overflow-x-auto p-2">
                            {data.tags.map((tag) => (
                                <Tag
                                    tag={tag}
                                    class="text-white/60 text-shadow-soft border-white/60"
                                />
                            ))}
                        </div>
                    )}
                    <div class="px-2">
                        <FormattedDate
                            date={data.pubDate}
                            posted={true}
                            class="text-white/60 text-shadow-soft"
                        />
                    </div>
                </div>
            </div>
        </div>
    ) : (
        <div>
            <div class="p-5 flex flex-col items-center w-full gap-3 border-b border-line">
                <h1 class="text-2xl md:text-5xl text-center font-crimson italic text-ink">
                    {data.title}
                </h1>
                <p class="text-sm font-mono text-ink-secondary">
                    {data.description}
                </p>
                <div class="flex flex-row items-center w-full justify-center">
                    {data.tags && (
                        <div class="flex gap-2 flex-row flex-nowrap items-center border-line border-dashed overflow-x-auto">
                            {data.tags.map((tag) => (
                                <Tag tag={tag} />
                            ))}
                        </div>
                    )}
                    <div class="px-2">
                        <FormattedDate date={data.pubDate} posted={true} />
                    </div>
                </div>
            </div>
        </div>
    )
}
